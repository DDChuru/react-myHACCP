# Self-Inspection Complete Flow Documentation

## üéØ Overview
End-to-end flow from creating a new self-inspection to completion with all data persisted to Firestore.

## üìä High-Level Flow Diagram

```mermaid
graph TB
    Start([User Opens App]) --> List[Self-Inspection List]
    List --> FAB[Tap FAB Button]
    FAB --> New[New Inspection Screen]
    
    New --> Site[Select Site]
    Site --> Name[Enter Inspection Name]
    Name --> Options[Configure Options]
    Options --> Create[Create Inspection]
    
    Create --> Firestore1[(Save to Firestore)]
    Firestore1 --> Conduct[Conduct Screen]
    
    Conduct --> AddIssue[Add Issue Button]
    AddIssue --> IssueForm[Issue Form]
    IssueForm --> AreaPicker[Select Area]
    IssueForm --> Category[Select Category]
    IssueForm --> Severity[Select Severity]
    IssueForm --> Description[Enter Description]
    IssueForm --> Photo[Capture Photo]
    IssueForm --> Responsible[Assign Person]
    IssueForm --> SaveIssue[Save Issue]
    
    SaveIssue --> Firestore2[(Update Firestore)]
    Firestore2 --> Conduct
    
    Conduct --> Complete[Complete Button]
    Complete --> Signature[Signature Pad]
    Signature --> Sign[Draw Signature]
    Sign --> FinalSave[Save & Complete]
    
    FinalSave --> Firestore3[(Final Update)]
    Firestore3 --> End([Back to List])
```

## üîÑ Detailed Screen Flow

### 1Ô∏è‚É£ Self-Inspection List Screen
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìã Self Inspections            ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  üîÑ Sync Status: ‚úÖ Synced      ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ Daily Kitchen Check    ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Main Facility          ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ üü° In Progress ‚Ä¢ 2 issues‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ Weekly Deep Clean      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Warehouse             ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ ‚úÖ Completed ‚Ä¢ 0 issues ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ         [ + New Inspection ]     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Actions:**
- View existing inspections
- Tap to resume/view
- FAB to create new

### 2Ô∏è‚É£ New Inspection Creation
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  New Self Inspection            ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Step 1: Select Site            ‚îÇ
‚îÇ  ‚óã Main Facility                ‚îÇ
‚îÇ  ‚óè Warehouse                    ‚îÇ
‚îÇ  ‚óã Distribution Center          ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  [ Continue ]                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Step 2: Inspection Details     ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Name: [Daily Safety Check   ]  ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  ‚òë Raise NCRs                  ‚îÇ
‚îÇ  ‚òë Capture Before/After Photos ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  [ Start Inspection ]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3Ô∏è‚É£ Conduct Inspection Screen
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Daily Safety Check             ‚îÇ
‚îÇ  Warehouse                      ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  üìä Progress Summary            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Total Areas  ‚îÇ Issues    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ      8       ‚îÇ     2     ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  üìù Issues Found:               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ üî¥ Critical            ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Kitchen - Broken seal  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ John Doe ‚Ä¢ Due: Today  ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ üü° Major               ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Storage - Temperature  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Jane Smith ‚Ä¢ Tomorrow  ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  [Complete Inspection]    [+]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4Ô∏è‚É£ Add Issue Flow
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Add Issue                      ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Location: [Select Area ‚ñº]      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ üîç Search areas...     ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ ‚óã Kitchen              ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ ‚óã Storage Room         ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ ‚óè Freezer              ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ ‚óã Loading Dock         ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Category: [Equipment ‚ñº]        ‚îÇ
‚îÇ  Severity: [Critical ‚ñº]         ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Description:                   ‚îÇ
‚îÇ  [Freezer door seal broken,  ]  ‚îÇ
‚îÇ  [causing temperature issue   ]  ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  üì∏ Evidence: [Capture Photo]   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Assign to: [John Doe ‚ñº]        ‚îÇ
‚îÇ  Due Date: [Tomorrow ]          ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  [ Save Issue ]                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 5Ô∏è‚É£ Signature & Completion
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Complete Inspection            ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ   ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Summary:                       ‚îÇ
‚îÇ  ‚Ä¢ 8 areas inspected           ‚îÇ
‚îÇ  ‚Ä¢ 2 issues found              ‚îÇ
‚îÇ  ‚Ä¢ Duration: 45 minutes        ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  Inspector Signature:          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ                        ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ      ___________       ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ     /           \      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ    (_ John Doe _)      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ                        ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                  ‚îÇ
‚îÇ  [ Clear ]  [ Save & Complete ] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üíæ Data Persistence Flow

```mermaid
sequenceDiagram
    participant U as User
    participant A as App
    participant F as Firestore
    participant S as Storage

    Note over U,S: CREATE INSPECTION
    U->>A: Enter name & select site
    A->>F: createSelfInspection()
    F-->>A: Return inspectionId
    A-->>U: Navigate to conduct

    Note over U,S: ADD ISSUE
    U->>A: Fill issue form
    U->>A: Capture photo
    A->>S: Store image locally (temp)
    A->>F: addIssueToInspection()
    F-->>A: Update successful
    A-->>U: Show issue in list

    Note over U,S: COMPLETE
    U->>A: Draw signature
    A->>F: updateSelfInspection(completed)
    F-->>A: Status updated
    A-->>U: Return to list
```

## üóÑÔ∏è Firestore Data Structure

```javascript
// Path: companies/{companyId}/selfInspections/{inspectionId}
{
  "id": "insp_123456",
  "name": "Daily Safety Check",
  "site": "Warehouse",
  "siteId": "site_001",
  "checklist": "Standard Self-Inspection",
  "status": "completed",
  "totalItems": 80,
  "completedItems": 80,
  "issues": [
    {
      "id": "issue_1234_abc",
      "areaId": "area_freezer",
      "areaName": "Freezer",
      "category": "Equipment",
      "categoryId": "cat_equip",
      "severity": "Critical",
      "severityId": "sev_001",
      "severityLevel": 1,
      "description": "Freezer door seal broken",
      "images": [
        {
          "uri": "local://temp/image1.jpg",
          "annotations": [],
          "uploadedAt": "2024-01-15T10:30:00Z"
        }
      ],
      "proposedActionDate": "2024-01-16",
      "responsibleUserId": "user_john",
      "responsibleUserName": "John Doe",
      "status": "pending",
      "createdAt": "2024-01-15T10:30:00Z",
      "createdBy": "user_inspector",
      "createdByName": "Inspector Name",
      "acknowledged": false
    }
  ],
  "issueCount": 2,
  "createdAt": "2024-01-15T09:00:00Z",
  "updatedAt": "2024-01-15T10:45:00Z",
  "scheduledDate": "2024-01-15",
  "startedAt": "2024-01-15T09:00:00Z",
  "completedAt": "2024-01-15T10:45:00Z",
  "createdBy": "user_inspector",
  "createdByName": "Inspector Name",
  "completedBy": "user_inspector",
  "completedByName": "Inspector Name",
  "inspectorSignature": "data:image/png;base64,iVBORw0KG...",
  "signedAt": "2024-01-15T10:45:00Z",
  "companyId": "2XTSaqxU41zCTBIVJeXb"
}
```

## üîÑ State Transitions

```mermaid
stateDiagram-v2
    [*] --> Draft: Create New
    Draft --> Pending: Save
    Pending --> InProgress: Start/Open
    InProgress --> InProgress: Add Issues
    InProgress --> Completed: Sign & Complete
    Completed --> [*]
    
    InProgress --> Cancelled: Cancel
    Cancelled --> [*]
```

## üì± Navigation Flow

```mermaid
graph LR
    A[/self-inspection] --> B[/self-inspection/new]
    B --> C[/self-inspection/conduct]
    C --> D[/self-inspection/add-issue]
    D --> C
    C --> E[SignatureModal]
    E --> A
    
    A --> F[/self-inspection/dashboard]
    A --> C
```

## ‚ö° Key User Actions & Data Updates

| User Action | Screen | Firestore Update | Local State |
|------------|--------|-----------------|-------------|
| Tap "New Inspection" | List | - | - |
| Select Site | New | - | selectedSite |
| Enter Name | New | - | inspectionName |
| Start Inspection | New | CREATE document | inspectionId |
| Add Issue | Conduct | - | Navigate |
| Select Area | Add Issue | - | selectedArea |
| Save Issue | Add Issue | UPDATE issues[] | issues array |
| Return to Conduct | Conduct | - | Refresh issues |
| Complete | Conduct | - | Show signature |
| Sign & Save | Signature | UPDATE status | - |
| Back to List | List | - | Refresh list |

## üö® Error Handling Points

1. **No Sites Available** ‚Üí Show empty state with message
2. **Empty Inspection Name** ‚Üí Validation alert
3. **No Areas for Site** ‚Üí Need to seed data
4. **Image Upload Fails** ‚Üí Queue for retry
5. **Offline Mode** ‚Üí Queue all operations
6. **Signature Required** ‚Üí Block completion

## ‚úÖ Success Criteria

- User can create inspection with custom name
- All areas included by default (no selection)
- Issues persist immediately to Firestore
- Issues show area location
- Inspection completes with signature
- Data viewable in Firestore console
- Can resume in-progress inspections

## üîÆ Future Enhancements

1. **Offline Mode** - Queue operations when no internet
2. **Image Upload** - Firebase Storage integration
3. **Push Notifications** - Alert responsible persons
4. **Reports** - Generate PDF reports
5. **Analytics** - Track common issues by area